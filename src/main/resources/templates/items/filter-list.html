<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head>
<title th:text="#{label.item.list}"></title>
<th:block th:include="fragments/header :: head"></th:block>
</head>
<body>
	<th:block th:include="fragments/header :: pre-loader"></th:block>
	<div id="pcoded" class="pcoded">
		<div class="pcoded-overlay-box"></div>
		<div class="pcoded-container navbar-wrapper">

			<th:block th:include="fragments/header :: navbar-top"></th:block>

			<div class="pcoded-main-container">
				<div class="pcoded-wrapper">
					<th:block th:include="fragments/header :: navbar-left"></th:block>

					<div class="pcoded-content">
						<div class="pcoded-inner-content">
							<!-- Main-body start -->
							<div class="main-body">
								<div class="page-wrapper">
									<!-- Page-body start -->
									<div class="page-body">

										<!-- Hover table card start -->
										<div class="card">
											<div class="card-header">
												<h5 th:text="#{label.item.list}"></h5>
												<a href="#" th:href="@{/items/new}"
													class="btn btn-primary waves-effect waves-light f-right d-inline-block md-trigger"><em
													class="icofont icofont-plus m-r-5"></em><span
													th:text="#{label.button.new}"></span></a>
												<button type="button"
													class="btn btn-warning btn-round waves-effect waves-light"
													data-toggle="modal" data-target="#importItemModal">
													<span th:text="#{label.button.import}">Import</span>
												</button>

											</div>
											<!-- Search Form -->
											<form th:action="@{/items/filter}" method="get"
												class="form-inline mb-3">
												<input type="text" name="searchTerm"
													class="form-control mr-2"
													placeholder="Search by name, code, or barcode"
													th:value="${searchTerm}">
												<button type="submit" class="btn btn-secondary">Search</button>
											</form>

											<!-- Table -->
											<table class="table table-striped table-bordered">
												<thead>
													<tr>
														<th>#</th>
														<th>Name</th>
														<th>Barcode</th>
														<th>Code</th>
														<th>Sale Price</th>
														<th>Purchase Price</th>
														<th>Actions</th>
													</tr>
												</thead>
												<tbody>
													<tr th:each="list, stat : ${lists}">
														<td th:text="${stat.index + 1}"></td>
														<td th:text="${list.itemName}"></td>
														<td th:text="${list.barcode}"></td>
														<td th:text="${list.itemCode}"></td>
														<td th:text="${list.unitPrice}"></td>
														<td th:text="${list.unitCost}"></td>
														<td><a th:href="@{'/items/update/' + ${list.id}}"
															class="btn btn-sm btn-info">Edit</a></td>
													</tr>
												</tbody>
											</table>

											<!-- Pagination -->
											<nav th:if="${totalPages > 1}">
												<ul class="pagination">
													<li th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
														th:classappend="${i == currentPage} ? 'active'"><a
														class="page-link"
														th:href="@{/items(page=${i}, searchTerm=${searchTerm})}"
														th:text="${i + 1}"></a></li>
												</ul>
											</nav>
										</div>

									</div>
									<!-- Hover table card end -->

								</div>

								<!-- Page-body end -->
							</div>
							<div id="styleSelector"></div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
	<th:block th:include="fragments/header :: footer"></th:block>
	<div class="modal fade" id="importItemModal" tabindex="-1"
		role="dialog">
		<div class="modal-dialog modal-sm" role="document">
			<div class="modal-content">
				<form th:action="@{/items/upload}" method="post"
					enctype="multipart/form-data">
					<div class="modal-header">
						<h4 class="modal-title">Import Items Form</h4>
					</div>
					<div class="modal-body">

						<div class="mb-3">
							<label for="warehouseSelect" class="form-label">File</label> <input
								type="file" id="file" name="file"
								class="form-control form-control-bold" required accept=".xlsx" />
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-primary">Import</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</body>

</html>
