<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="fragments/layout :: layout">
<body>
<div>
    <h4 th:text="${menu.id == null ? 'Create Menu' : 'Edit Menu'}"></h4>

    <form th:action="@{/admin/menus/save}" th:object="${menu}" method="post">
        <div class="mb-3">
            <label>Title</label>
            <input type="text" class="form-control" th:field="*{title}" required>
        </div>

        <div class="mb-3">
            <label>URL</label>
            <input type="text" class="form-control" th:field="*{url}">
        </div>

        <div class="mb-3">
            <label>Icon (optional)</label>
            <input type="text" class="form-control" th:field="*{icon}" placeholder="e.g. fa fa-box">
        </div>

        <div class="mb-3">
            <label>Parent Menu</label>
            <select class="form-select" name="parentId">
                <option value="">None</option>
                <option th:each="m : ${allMenus}" th:value="${m.id}" th:text="${m.title}"
                        th:selected="${menu.parent != null and menu.parent.id == m.id}"></option>
            </select>
        </div>

        <div class="mb-3">
            <label>Required Permission</label>
            <select class="form-select" th:field="*{requiredPermission}">
                <option value="">None</option>
                <option th:each="p : ${allPermissions}" th:value="${p.name}" th:text="${p.name}"
                        th:selected="${p.name == menu.requiredPermission}"></option>
            </select>
        </div>

        <div class="mb-3">
            <label>Sort Order</label>
            <input type="number" class="form-control" th:field="*{sortOrder}">
        </div>

        <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" th:field="*{active}">
            <label class="form-check-label">Active</label>
        </div>

        <button type="submit" class="btn btn-success">Save</button>
        <a class="btn btn-secondary" th:href="@{/admin/menus}">Cancel</a>
    </form>
</div>
</body>
</html>
